# Структура классов #
## Основные классы ##
```
Префиксы Backend_ и Backend_Mvc_ опущены.
```

  * Mvc - Базовый абстрактный класс. Фабрика объектов Request, Response, RequestDispatcher.
  * Request - Содержит функции работы с запросом. При создании объекта, автоматически считывает необходимые параметры (путь, хост, порт, заголовки) из окружения.
  * Response - Содержит функции работы с ответом на запрос. Через этот объект осуществляется вывод, установка заголовков ответа и т.п.
  * IRequestDispatcher и RequestDispatcher - Интерфейс и конкретная реализация класса, отвечающего за обработку запроса. Этот класс даёт ответ на вопрос "Что делать, если запрошен такой-то адрес?". Является фабрикой объекта IDispatchResult. Стандартный класс зависит от Routes.
  * IDispatchResult и DispatchResult - Интерфейс и конкретная реализация класса, отвечающего за выполнение действий, определённых IRequestDispatcher и создание вида для результатов их работы. Является фабрикой объекта, реализующего IView.
  * IView и View - Интерфейс и конкретная реализация вида. Являются интерфейсом между результатом и библиотекой шаблонов.

## Вспомогательные классы ##
  * Routes - Хранилище карты сопоставления запрашиваемых адресов и действий (аналог класса Routes RoR, но более изощрённый: позволяет вводить фильтрацию по любым критериям - хосту, порту и т.п.).

# Как менять логику #

  1. Запрос, ответ (к примеру, нужно больше информации об окружении): наследуются классы Request, Response, переопределяется конструктор (он отвечает за получение информации из среды). Переопределяются фабричные методы Mvc.
  1. Логика обработки запроса (к примеру, если нужно вместо Routes использовать if): реализуются классы с интерфейсами IRequestDispatcher и IDispatchResult. В первом реализуется логика реакции на Request, во втором - логика выполнения результата. Переопределяется фабричный метод Mvc::createRequestDispatcher().
  1. Логика вывода вида: если используются стандартный Response - в карте запросов задаётся другой класс вида. В виде реализуются функции вывода.